# Phase 3 実行計画：Week 7-12 150問本生成・統合フェーズ

**状態**: 準備完了 → 実行開始
**開始日時**: 2025-11-06（以降）
**フェーズ**: Phase 3（本生成・統合・公開準備）
**目標**: 遊技機取扱主任者試験 150問本生成 + データベース構築

---

## 📋 Phase 3 全体計画

### **期間**: Week 7-12（6週間）
### **目標**: 150問本生成 → 品質統合検証 → データベース構築 → 本番公開準備

```
Week 7:  技術管理分野50問生成 + 複合語検証
Week 8:  セキュリティ分野50問生成 + 複合語検証
Week 9:  営業規制分野50問生成 + 複合語検証
Week 10: 150問統合品質メトリクス評価
Week 11: データベース構築・最終統合
Week 12: 本番公開準備・データセット完成
```

---

## 🎯 Week 7: 技術管理分野50問本生成フェーズ

### **Task 7.1: Claude APIによる技術管理分野50問生成**

#### 実行方法

```bash
# Step 1: システムプロンプト + チャンクコンテキスト準備（既完成）
✓ output/technology_domain_50_generation_plan.json 参照

# Step 2: Claude API呼び出し（手動または自動スクリプト実行）
# テンプレート別にバッチ処理（T1-T5各10問）

# Step 3: 生成結果をJSONL形式で保存
output/technology_domain_50_raw.json

# Step 4: 複合語検証実行
python3 backend/validate_week6_150_problems.py

# Step 5: 品質メトリクス計算（初版）
python3 backend/integrate_week6_quality_metrics.py
```

#### 生成計画

```
【技術管理分野 50問】

T1 (基本知識/基礎):  10問
  - 目標: 型式検定、遊技機の基本概念
  - ひっかけ度: 10-20%

T2 (条文直結/標準):  10問
  - 目標: 法令・条文に直結した問題
  - ひっかけ度: 30-40%

T3 (ひっかけ/応用):  10問
  - 目標: 誤りやすいポイント
  - ひっかけ度: 40-50%

T4 (複合条件/標準):  10問
  - 目標: 複数条件の判定
  - ひっかけ度: 30-40%

T5 (実務判断/応用):  10問
  - 目標: 実務シナリオでの判断
  - ひっかけ度: 40-50%

合計: 50問
```

#### 成功基準

```
✅ 複合語検証: 95%以上合格
✅ 品質スコア: 0.72以上
✅ ドメイン品質: 0.84点以上（技術管理の推定）
✅ ファイル生成: technology_domain_50_raw.json 完成
```

---

## 🎯 Week 8: セキュリティ分野50問本生成フェーズ

### **Task 8.1: セキュリティ分野50問生成**

```
実行手順（Week 7と同一パターン）:

1. output/security_domain_50_generation_plan.json 参照
2. Claude API呼び出し（T1-T5別バッチ）
3. security_domain_50_raw.json に保存
4. 複合語検証実行
5. 品質メトリクス計算

成功基準:
  ✅ 複合語検証: 95%以上合格
  ✅ 品質スコア: 0.82点以上
  ✅ ファイル生成: security_domain_50_raw.json 完成
```

---

## 🎯 Week 9: 営業規制分野50問本生成フェーズ

### **Task 9.1: 営業規制分野50問生成**

```
実行手順（Week 7-8と同一パターン）:

1. output/regulation_domain_50_generation_plan.json 参照
2. Claude API呼び出し（T1-T5別バッチ）
3. regulation_domain_50_raw.json に保存
4. 複合語検証実行
5. 品質メトリクス計算

成功基準:
  ✅ 複合語検証: 95%以上合格
  ✅ 品質スコア: 0.83点以上
  ✅ ファイル生成: regulation_domain_50_raw.json 完成

このステップで 150問全体の本生成が完了
```

---

## 🎯 Week 10: 150問統合品質メトリクス評価

### **Task 10.1: 150問複合語検証統合**

```
実行内容:
  - 3ドメイン×50問 = 150問全体の複合語検証
  - ドメイン別統計集計
  - 複合語使用頻度分析
  - カバー率計算（目標: 80%以上）

出力ファイル:
  output/validation_report_week10_150problems_final.json
  output/compound_word_usage_analysis.json

成功基準:
  ✅ 総合合格率: 95%以上
  ✅ 複合語カバー率: 80%以上
  ✅ 重大エラー: 0件
```

### **Task 10.2: 150問品質メトリクス統合評価**

```
実行内容:
  - 4項目品質メトリクス統合計算
  - 総合品質スコア算出
  - ドメイン別品質評価
  - Week別推移分析

計算式:
  総合 = 0.30 × 明確性 + 0.30 × ディストラクタ
       + 0.20 × 根拠性 + 0.20 × ひっかけ度

期待値:
  ✅ 総合品質スコア: 0.83点（優秀）
  ✅ ドメイン別: 技術0.84, セキュリティ0.82, 規制0.83

出力ファイル:
  output/integrated_quality_report_week10_final.json
  output/quality_metrics_domain_breakdown.json
```

---

## 🎯 Week 11: データベース構築・最終統合

### **Task 11.1: 150問データベース構築**

```
実行内容:
  - 150問を統一フォーマットで整形
  - メタデータ収集・構造化
  - インデックス作成
  - 検索可能な形式に最適化

出力形式:
  {
    "problem_id": "patshinko_001",
    "domain": "technology|security|regulation",
    "template": "T1|T2|T3|T4|T5",
    "difficulty": "基礎|標準|応用",
    "question": "...",
    "options": {"A": "...", "B": "...", "C": "...", "D": "..."},
    "correct_answer": "A|B|C|D",
    "explanation": "...",
    "source_theme": "theme_XXX",
    "compound_words_used": ["複合語1", ...],
    "quality_score": 0.XX,
    "distractor_strength": 0.XX
  }

出力ファイル:
  data/patshinko_150_problems_database.jsonl
  data/patshinko_150_problems_metadata.json
```

### **Task 11.2: 最終統合レポート生成**

```
実行内容:
  - 150問全体の統計分析
  - 品質メトリクス最終集計
  - ドメイン別比較分析
  - テンプレート別統計

出力ファイル:
  output/FINAL_REPORT_150_PROBLEMS.json
  output/FINAL_STATISTICS_150_PROBLEMS.txt
```

---

## 🎯 Week 12: 本番公開準備・データセット完成

### **Task 12.1: 本番公開準備**

```
実行内容:
  - README.md 作成（150問セット説明）
  - API仕様書作成
  - データベーススキーマ確認
  - 本番環境デプロイメント準備

成果物:
  - README_150_PROBLEMS.md
  - API_SPECIFICATION.md
  - DEPLOYMENT_GUIDE.md
  - LICENSE情報
```

### **Task 12.2: 最終品質検証**

```
実行内容:
  - ランダムサンプリング検証（30問）
  - 複合語使用確認（抜き打ち検査）
  - ひっかけ度スコア確認
  - 品質スコア最終確認

基準:
  ✅ サンプル合格率: 100%
  ✅ 複合語精度: 100%
  ✅ 品質スコア: 0.72以上（全問）
```

### **Task 12.3: データセット公開**

```
実行内容:
  - GitHub リリース作成
  - データセット公開
  - ドキュメント公開
  - 利用ガイド配布

公開形式:
  - JSONL形式（機械学習向け）
  - JSON形式（Web API向け）
  - CSV形式（表計算ソフト向け）
  - SQLiteデータベース（アプリ向け）
```

---

## 📊 Phase 3 実行状況トラッキング

### 実行準備チェックリスト（実行前）

```
✅ Week 6完了: 150問本生成フレームワーク準備完全完備
✅ システムプロンプト: 複合語46個埋め込み完成
✅ チャンクコンテキスト: 243.2kトークン統合完了
✅ テンプレート定義: 5種×3難易度完備
✅ 検証スクリプト: 複合語・品質メトリクス完成
✅ 成功基準: 複合語≥95%, 品質スコア≥0.72
```

### Week別実行トラッキング（実行中）

| Week | Task | 目標問題数 | 複合語検証 | 品質スコア | ステータス |
|------|------|----------|----------|-----------|---------|
| 7 | 技術管理50 | 50 | ≥95% | ≥0.84 | 実行予定 |
| 8 | セキュリティ50 | 50 | ≥95% | ≥0.82 | 実行予定 |
| 9 | 営業規制50 | 50 | ≥95% | ≥0.83 | 実行予定 |
| 10 | 150問統合評価 | 150 | ≥95% | ≥0.83 | 実行予定 |
| 11 | DB構築・統合 | 150 | - | - | 実行予定 |
| 12 | 公開準備・完成 | 150 | - | - | 実行予定 |

---

## 🎯 Phase 3 成功基準

### 最終デリバリー基準

```
✅ 150問全体生成完了
✅ 複合語検証: 95%以上合格（145問以上）
✅ 総合品質スコア: 0.83点達成
✅ ドメイン別品質: すべて0.72以上
✅ データベース構築: 完全な形式で公開可能
✅ ドキュメント完備: 利用ガイド・仕様書完成
✅ 品質保証: 最終検証合格
```

### Phase 3完了時の状態

```
【成果物】
  - 150問統合データセット (JSONL + JSON形式)
  - メタデータファイル
  - 複合語使用分析レポート
  - 品質メトリクス最終レポート
  - 公開用ドキュメント群

【統計】
  - 総問題数: 150問
  - ドメイン数: 3個
  - テンプレート数: 5種
  - 複合語数: 46個（完全統合）
  - 総コード行数: 12,000+行
  - 実装スクリプト数: 50+個

【品質指標】
  - 複合語検証合格率: 95%以上
  - 総合品質スコア: 0.83点（優秀）
  - データベース完全性: 100%
  - ドキュメント完成度: 100%
```

---

## 🚀 Phase 3 実行開始ガイド

### 実行前の確認事項

```
1. Claude API アクセス確認
   □ API キー設定完了
   □ レート制限確認
   □ 費用見積もり確認

2. ファイル・ディレクトリ確認
   □ output/ ディレクトリ存在確認
   □ data/ ディレクトリ存在確認
   □ backend/ スクリプト全て存在確認

3. データ準備確認
   □ チャンクファイル: 25個すべて存在
   □ 複合語辞書: 46個統合完了
   □ 生成計画ファイル: 3個完成

4. スクリプト確認
   □ 生成スクリプト: 3個確認
   □ 検証スクリプト: 2個確認
   □ テストスクリプト: 動作確認
```

### Week 7 実行ステップ

```
1. 準備（30分）
   $ python3 backend/generate_technology_domain_50.py

2. Claude API呼び出し（60-90分）
   - T1 (基本知識) 10問生成
   - T2 (条文直結) 10問生成
   - T3 (ひっかけ) 10問生成
   - T4 (複合条件) 10問生成
   - T5 (実務判断) 10問生成

3. 検証（5-10分）
   $ python3 backend/validate_week6_150_problems.py

4. 品質評価（5分）
   $ python3 backend/integrate_week6_quality_metrics.py

5. コミット（2分）
   $ git add output/technology_domain_50_raw.json
   $ git commit -m "feat: Week 7 Task 7.1 - 技術管理分野50問本生成完了"
```

---

## 📝 Phase 3期間中の記録・報告

### 週別進捗報告（毎週金曜日）

```
Week 7 進捗報告:
  - 生成問題数: XX問
  - 複合語検証: X%
  - 品質スコア: X.XX点
  - 課題・改善点: ...

Week 8 進捗報告: ...
...
```

### 月末統計レポート

```
Week 7-8 統計:
  - 生成問題: 100問
  - 複合語検証平均: X%
  - 品質スコア平均: X.XX点
  - コミット数: XX個
```

---

## ✨ Phase 3期待値

### 品質指標の期待値

```
【Week 7-9 各ドメイン】
  技術管理: 0.84点（優秀）
  セキュリティ: 0.82点（良好）
  営業規制: 0.83点（優秀）

【Week 10 統合】
  総合品質スコア: 0.83点（優秀）
  複合語検証合格率: 95%以上
  複合語カバー率: 80%以上

【Week 11-12 最終】
  データベース完全性: 100%
  公開準備完成度: 100%
  品質保証検証: 100%合格
```

### デリバリー物成果物

```
【データセット】
  - patshinko_150_problems_database.jsonl
  - patshinko_150_problems_metadata.json

【レポート】
  - FINAL_REPORT_150_PROBLEMS.json
  - FINAL_STATISTICS_150_PROBLEMS.txt

【ドキュメント】
  - README_150_PROBLEMS.md
  - API_SPECIFICATION.md
  - DEPLOYMENT_GUIDE.md
```

---

**Phase 3 実行開始準備: 完全完備 ✅**

**次の実行ステップ**: Week 7 Task 7.1 「技術管理分野50問本生成」

**予想開始時期**: 2025-11-07 以降

---

最終更新: 2025-11-06
ステータス: 準備完了 → 本生成実行開始可能
