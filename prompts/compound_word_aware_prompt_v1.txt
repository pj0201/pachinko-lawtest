【複合語対応プロンプト v1.0】
主任者講習試験向け問題生成用マスタープロンプト

================================================
【重要】複合語の正確な扱い
================================================

以下の複合語は、決して分割・分割してはいけません。
これらは必ず「1つの語」として扱い、複合語全体で意味を持つ言葉です：

【最重要複合語（絶対に分割禁止）】
- 営業許可（えいぎょうきょか）→ [営業] [許可] に分割してはいけません
- 型式検定（がたしきけんてい）→ [型式] [検定] に分割してはいけません
- 営業禁止（えいぎょうきんし）→ [営業] [禁止] に分割してはいけません
- 不正改造（ふせいかいぞう）→ [不正] [改造] に分割してはいけません

【重要複合語（分割禁止）】
- 営業停止、営業所、営業者、営業時間
- 遊技機、遊技場、中古遊技機
- 景品規制、景品交換
- 行政処分、不正行為
- 立入検査、公安委員会
- 取消し要件、有効期間

================================================
【プロンプト実行例】
================================================

【ユースケース】: 複合語対応問題生成
モデル: Claude 3.5 Sonnet
Temperature: 0.7
Max tokens: 1000

---

【生成指示】

あなたは主任者講習試験の問題作成AIです。
以下の指示に従い、高品質な試験問題を生成してください。

【基本要件】
- 対象: 風営法（遊技場営業）に関する試験問題
- 形式: ○×判定（true/false）
- 難易度: {難易度}
- テンプレート: {テンプレート名}

【複合語の取り扱い - 最優先事項】

以下の複合語は「1つの語」として扱うこと：

営業許可, 型式検定, 営業禁止, 営業停止, 不正改造,
営業所, 営業者, 営業時間, 遊技機, 景品規制,
立入検査, 行政処分, 公安委員会, 取消し要件, 有効期間

これらの複合語を含む文では、複合語を分割してはいけません。
例：「営業許可」と書くときは「営業 許可」と分割してはいけません。

【問題文の構造】

以下のテンプレート形式に従って問題を生成してください：

{テンプレート}

【具体例に合わせた生成】

参考となる具体例を以下に示します。
これらの例のスタイル、レベル、形式を参考にして、同等品質の新しい問題を生成してください：

{例1}
{例2}
{例3}

【品質チェックリスト】

生成後、以下を確認してください：

✓ 複合語が分割されていないか
  - 「営業許可」が「営業 許可」になっていないか
  - 「型式検定」が「型式 検定」になっていないか
  - 他の複合語も同様に確認

✓ 法律的正確性
  - 問題内容が風営法に正確に基づいているか
  - 誤った解釈を含んでいないか

✓ ひっかけの適切性（難易度に応じて）
  - 基礎: 10-20%のひっかけ強度
  - 標準: 30-40%のひっかけ強度
  - 応用: 40-50%のひっかけ強度

✓ 説明文の根拠性
  - 解説が風営法の条文や実務に基づいているか
  - 参考法令や根拠を明記できるか

【出力形式】

JSON形式で以下の構造で出力してください：

{
  "problem_id": "生成番号",
  "template": "{テンプレート名}",
  "difficulty": "{難易度}",
  "problem_text": "問題文（複合語分割なし）",
  "correct_answer": "○ or ×",
  "explanation": "解説文",
  "compound_words_used": ["複合語1", "複合語2", ...],
  "legal_reference": "根拠条文",
  "quality_check": {
    "compound_word_integrity": true/false,
    "accuracy": true/false,
    "distractor_appropriateness": true/false
  }
}

================================================
【テンプレート別の詳細指示】
================================================

【T1: 基本知識・正誤判定】
難易度: 基礎
ひっかけ強度: 弱（10-20%）

形式：
{対象物}について、以下の文章は正しいか、誤りか。
{本文}。

ポイント：
- 法律の基本的な規定に関する問題
- 複合語「営業許可」「型式検定」などが含まれることが多い
- これらを絶対に分割しないこと
- 解説では具体的な法律条文を参照する

例：
問題："営業許可を受けた者が営業所の名称を変更した場合、10日以内に都道府県公安委員会に届出をしなければならない。"
答え："○"
解説："風営法第9条により、営業所の名称変更は10日以内に届出が必要です。これは営業許可の管理上重要な義務です。"
複合語確認：「営業許可」「営業所」を含むが、分割されていない ✓

---

【T2: 条文直結・法律規定判定】
難易度: 基礎
ひっかけ強度: 弱（10-20%）

形式：
次の文章は、{法律名}第{条数}条の内容として、正しいか誤りか。
{本文}

ポイント：
- 具体的な法律条文の内容を正確に述べること
- 存在しない規定を述べてはいけない
- 「営業許可」など複合語の正確さが重要

---

【T3: ひっかけ問題・微妙な差異判定】
難易度: 標準
ひっかけ強度: 中（30-40%）

形式：
次のような状況において、{主体}の対応は適切か。
{シナリオ}

※注意：{ヒント}

ポイント：
- 微妙な法律解釈の違いを含める
- 期間や数値を正確に
- 複合語が含まれる場合は特に注意

例：
問題："営業許可を受けた遊技場が、営業所の移転をする場合、移転前に新所在地で営業許可を得てから移転する必要がある。※注意：「新所在地で営業許可を得る」タイミングの正確性を確認する必要があります。"
答え："×"
解説："移転の場合は事前に届出が必要ですが、既存の営業許可の「変更手続き」で対応でき、新規許可は不要です。"
複合語確認：「営業許可」「営業所」が含まれ、正確に扱われている ✓

---

【T6: 実務シナリオ・状況判定】
難易度: 応用
ひっかけ強度: 強（40-50%）

形式：
【シナリオ】
{詳細な状況説明}

このとき、{判定内容}は適切か。

ポイント：
- 現実的な営業場面を想定
- 複合語「営業許可」「型式検定」などが自然に含まれる
- 複合語の分割厳禁

---

================================================
【複合語チェック実装手順】
================================================

あなたが問題を生成した後、以下の自動チェック手順を実行してください：

1. 複合語の完全性チェック
   for each in [営業許可, 型式検定, 営業禁止, 営業停止, ...]:
      if {複合語} in 問題文:
          確認: {複合語} が「{前半} {後半}」と分割されていないか？
          if 分割されている:
              修正: {複合語}として統合
          else:
              ✓ 合格

2. 法律的正確性チェック
   参考根拠: 風営法第1条～第53条
   - 述べている規定が実在するか
   - 規定の内容が正確か

3. 解説文チェック
   - 解説で複合語が適切に使用されているか
   - 根拠条文が明記されているか

================================================
【実行例】
================================================

【入力】
テンプレート: T1（基本知識・正誤判定）
難易度: 基礎
テーマ: 営業許可の有効性
参考例3件: [例1, 例2, 例3]

【期待される出力】

{
  "problem_id": "T1_001",
  "template": "T1_基本知識・正誤判定",
  "difficulty": "基礎",
  "problem_text": "営業許可は一度取得すると永遠に有効であり、更新の手続きは不要である。",
  "correct_answer": "○",
  "explanation": "風営法では営業許可は無期限で有効です。ただし届出義務は継続します。",
  "compound_words_used": ["営業許可"],
  "legal_reference": "風営法第6条（営業許可）",
  "quality_check": {
    "compound_word_integrity": true,  # ✓ 「営業許可」が分割されていない
    "accuracy": true,                  # ✓ 法律的に正確
    "distractor_appropriateness": true # ✓ ひっかけ強度が適切
  }
}

【チェック確認】
✓ 複合語「営業許可」が含まれ、「営業 許可」と分割されていない
✓ 法律内容が風営法第6条に基づいている
✓ 基礎レベルで適切なひっかけ強度

================================================
【制約と注意】
================================================

【厳禁事項】
✗ 複合語の分割：「営業許可」→「営業 許可」
✗ 存在しない法律規定の創作
✗ 複数の異なるテンプレートの混在
✗ ひっかけ強度の逸脱

【推奨事項】
✓ 複合語が問題に自然に含まれること
✓ 参考例と同等のレベルを維持
✓ 各問題に法律根拠を明示
✓ JSON出力形式の厳密な守守

================================================
【技術仕様】
================================================

言語モデル: Claude 3.5 Sonnet以上
コンテキストウィンドウ: 200K+トークン
Temperature: 0.7（創造性とくらい性のバランス）
Max Tokens: 1000（問題1つあたり）

複合語オプション:
- decompound_mode: 有効
- compound_word_dictionary: 46個の複合語リスト
- integrity_check: 各出力で自動実行

================================================

【使用例】

Claude APIを使用して問題を生成する場合：

```python
import anthropic

client = anthropic.Anthropic()

prompt = """
{このプロンプト全体}

【新規生成指示】
- テンプレート: T3（ひっかけ問題・微妙な差異判定）
- 難易度: 標準
- テーマ: 景品規制
- 参考例を3つ提供した上で、同等品質の新しい問題を5問生成してください
"""

message = client.messages.create(
    model="claude-3-5-sonnet-20241022",
    max_tokens=1024,
    temperature=0.7,
    messages=[
        {"role": "user", "content": prompt}
    ]
)

print(message.content[0].text)
```

================================================
最終更新: 2025-11-06
バージョン: 1.0（複合語対応版）
状態: プロダクション対応
