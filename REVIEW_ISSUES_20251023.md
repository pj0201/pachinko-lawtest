# 900問レビュー指摘事項まとめ
作成日: 2025-10-23
レビュアー: ユーザー
対象: OPUS生成900問（opus_900_expanded_20251023_114422.json）

---

## 🚨 重大な問題（最優先修正）

### 1. 重複問題の大量発生
**具体例**:
- q0092: "遊技機購入には正規の契約が必要" → ○
- q0106: "遊技機購入には正規の契約が不要" → ×

**問題点**:
- 実質的に同じ内容を問う問題が多数存在
- 複数の生成パターンで似た問題が出現している

**原因仮説**:
- 生成ロジックが複数パターンを独立実行し、類似判定なしで統合している

**対策**:
- セマンティック重複検出アルゴリズムの導入
- 類似度スコア計算（閾値85%以上は重複とみなす）
- キーワードベース + 意味ベースのハイブリッド検出

---

### 2. カテゴリの不適切な割り当て
**具体例**:
- q0092, q0106: 「民法」の問題が「遊技機管理」カテゴリに分類されている

**問題点**:
- 風営法に関係ない法律（民法、商法等）が混入
- 主任者試験の範囲外の問題が含まれている

**対策**:
- カテゴリ適合性チェックロジックの実装
- 風営法関連法令リストの作成
- 適用法令とカテゴリの対応表の整備

**許容される法令**:
- 風営法（風俗営業等の規制及び業務の適正化等に関する法律）
- 風営法施行令
- 風営法施行規則
- 遊技機の認定及び型式の検定等に関する規則
- 各都道府県の風営法施行条例

**除外すべき法令**:
- 民法（契約一般）
- 商法（商行為一般）
- その他の一般法

---

### 3. 法的根拠の不明確さ
**具体例**:
- q0092解説: "民法に規定されています"
- q0106解説: "民法を確認してください"

**問題点**:
- 具体的な条文番号がない
- 検証不可能な記述

**対策**:
- 法的根拠の必須項目化
  - 法令名 + 第○条第○項
  - 例: "風営法第4条第1項第5号"
- 条文が存在しない場合は問題自体を削除

**テンプレート**:
```
解説: [結論]. [理由].
法的根拠: [法令名]第○条第○項に規定されています。
```

---

## ⚠️ 品質問題（改善必要）

### 4. 問題文の抽象性・曖昧性
**具体例**:
- "正規の契約" → 何を指すのか不明
- "これは必須要件です" → 何の必須要件？

**問題点**:
- 指示語（これ、それ）が多用されている
- 補足する単語が欠けている
- 抽象的な表現が多い

**対策**:
- 指示語の検出と具体化
- 主語・目的語の明確化
- 専門用語の定義追加

**修正例**:
```
修正前: "これには届出が必要である"
修正後: "遊技機の新規設置には、営業所の所在地を管轄する公安委員会への届出が必要である"
```

---

### 5. 短文問題の説明不足
**問題点**:
- 短い問題文（30文字以下）は特に説明不足が目立つ
- 文脈が欠如している

**対策**:
- 短文問題の特別チェック（文字数カウント）
- 最小限の情報チェックリスト:
  - 主語（誰が/何が）
  - 述語（何をする/どうなる）
  - 条件（いつ/どこで/どのような場合）
  - 対象（何に対して）

---

## 📚 生成ロジック改善の方向性

### 6. 難易度レベルの調整
**要件**:
- 簿記3級レベルまで（難しい言い回しは避ける）
- 専門用語は使うが、複雑な法律用語は避ける

**NG表現例**:
- 法律的に複雑な表現
- 多重否定
- 長すぎる条件分岐（3つ以上のAND/OR）

**OK表現例**:
- シンプルで明確な表現
- 単一論点
- 実務的な内容

---

### 7. 問題形式のベンチマーク拡大
**現状**:
- 運転免許試験をベースにしている

**改善方向**:
- 運転免許以外の法律系正誤式問題をリサーチ
- 例: 宅建士試験、行政書士試験、FP試験等
- 簿記3級レベルの難易度に注意

---

## 🔧 実装すべきレビュー・修正システム

### Phase 1: 自動検出システム
1. **重複検出エンジン**
   - セマンティック類似度計算
   - キーワードベース重複検出

2. **カテゴリ適合性チェッカー**
   - 法令名の抽出と検証
   - カテゴリ×法令の対応表チェック

3. **法的根拠検証器**
   - 条文番号の存在確認
   - フォーマットチェック

4. **具体性スコアリング**
   - 指示語カウント
   - 文字数チェック
   - 主語・述語の存在確認

### Phase 2: 半自動修正システム
1. **問題文の具体化**
   - 指示語の置換候補提示
   - 補足情報の自動生成

2. **法的根拠の補完**
   - RAGシステムから条文検索
   - 条文番号の自動付与

3. **解説の改善**
   - テンプレートベース解説生成
   - 法的根拠の統一フォーマット化

### Phase 3: 品質保証
1. **最終チェックリスト自動実行**
2. **修正前後の比較レポート生成**
3. **統計情報の可視化**

---

## 📊 期待される成果

- 重複問題: 0件（完全除去）
- カテゴリ適合率: 100%（風営法関連のみ）
- 法的根拠明記率: 100%（条文番号付き）
- 具体性スコア: 平均80点以上（100点満点）
- 短文問題の説明充足率: 100%

---

## 次のアクション
1. 法律系正誤式問題のリサーチ（運転免許以外）
2. 各検出・修正ロジックの詳細設計
3. 実装とテスト
4. 900問への一括適用
