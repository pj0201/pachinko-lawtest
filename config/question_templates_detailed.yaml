# 問題タイプテンプレート - 詳細設計版
# 風営法試験向け 15テンプレート
# Few-shot prompting最適化版

metadata:
  version: "1.0"
  created_date: "2025-11-06"
  purpose: "複合語対応・ひっかけ強度制御を考慮した問題生成テンプレート"
  optimization_target: "Few-shot prompting, Claude API"
  total_templates: 15

# ====================================================================
# テンプレート 1-5: 基礎判断系
# ====================================================================

templates:
  # T1: 正誤判定 - 基本知識型
  - id: T1
    name: "基本知識・正誤判定"
    description: "法令の基本的な規定を正確に理解しているか確認"
    format: "○×形式"
    difficulty_level: "基礎"
    distractor_control: "弱（10-20%）"
    pattern: |
      {対象物}について、以下の文章は正しいか、誤りか。
      {本文}。

      ○ 正しい
      × 誤り

    best_for:
      - "定義や基本的な禁止事項"
      - "営業許可の要件"
      - "営業時間制限"

    examples:
      - question: "営業許可を受けた者が営業所の名称を変更した場合、10日以内に都道府県公安委員会に届出をしなければならない。"
        answer: "○"
        explanation: "風営法第9条により、営業所の名称変更は10日以内に届出が必要です。これは営業許可の管理上重要な義務です。"
      - question: "型式検定に合格した遊技機について、その仕様には永遠に変更が加えられることはない。"
        answer: "×"
        explanation: "型式検定の有効期限は3年間です。その後の更新や仕様変更がある場合は新たに申請が必要です。"
      - question: "営業者は景品として金銭を直接支払することは法律では禁止されていない。"
        answer: "×"
        explanation: "風営法では金銭の景品化は厳格に禁止されています。景品は商品券やプリペイドカード形式で支給する必要があります。"

  # T2: 条文直結型
  - id: T2
    name: "条文直結・法律規定判定"
    description: "具体的な法律条文の内容を正確に把握しているか確認"
    format: "○×形式"
    difficulty_level: "基礎"
    distractor_control: "弱（10-20%）"
    pattern: |
      次の文章は、{法律名}第{条数}条の内容として、正しいか誤りか。
      {本文}

    best_for:
      - "具体的な条文の内容"
      - "法令の詳細な規定"
      - "罰則や処罰規定"

    examples:
      - question: "次の文章は、風営法第1条の内容として、正しいか誤りか。風営法は、遊技場営業に関する問題について定めた法律である。"
        answer: "○"
        explanation: "風営法第1条は風営法の目的を定めており、遊技場営業の適正な運営を確保することが目的です。"
      - question: "次の文章は、風営法第10条の内容として、正しいか誤りか。営業者は毎月1回、営業成績を都道府県公安委員会に報告する義務がある。"
        answer: "×"
        explanation: "営業成績の報告義務は一般的には定められていません。報告義務は営業許可の更新時など特定の時期に限定されます。"
      - question: "次の文章は、風営法第50条の内容として、正しいか誤りか。遊技機の不正改造は禁止されており、違反者には懲役と罰金が科される。"
        answer: "○"
        explanation: "風営法第50条では不正改造行為を禁止し、違反には3年以下の懲役または300万円以下の罰金が科されます。"

  # T3: ひっかけ - 微妙な差異型
  - id: T3
    name: "ひっかけ問題・微妙な差異判定"
    description: "微妙な違いを見分けられるか、落とし穴を避けられるか確認"
    format: "○×形式"
    difficulty_level: "標準"
    distractor_control: "中（30-40%）"
    pattern: |
      次のような状況において、{主体}の対応は適切か。
      {シナリオ}

      ※注意：{ヒント}

    best_for:
      - "微妙な法律解釈の違い"
      - "期間や数値の間違い"
      - "条件付きの規定"

    examples:
      - question: "営業許可を受けた遊技場が、営業所の移転をする場合、移転前に新所在地で営業許可を得てから移転する必要がある。※注意：「新所在地で営業許可を得る」タイミングの正確性を確認する必要があります。"
        answer: "×"
        explanation: "移転の場合は事前に届出が必要ですが、既存の営業許可の「変更手続き」で対応でき、新規許可は不要です。"
      - question: "遊技機を新たに設置する場合、設置から5日以内に都道府県公安委員会に届出をしなければならない。※注意：「5日」が「10日」や「15日」ではなく正確に「5日」であることを確認する必要があります。"
        answer: "×"
        explanation: "遊技機設置の届出期限は「設置日から7日以内」です。5日ではなく7日が正確な期限です。"
      - question: "営業者は毎年12月31日までに翌年の営業計画を公安委員会に提出しなければならない。※注意：「毎年12月31日」という具体的な日付が実際に法律で定められているかを確認する必要があります。"
        answer: "×"
        explanation: "このような一般的な営業計画提出義務は風営法では定められていません。虚偽の詳細さに惑わされやすいひっかけです。"

  # T4: 複数条件判定型
  - id: T4
    name: "複合条件・要件全体判定"
    description: "複数の条件が全て満たされているか、また優先順位を理解しているか確認"
    format: "○×形式"
    difficulty_level: "標準"
    distractor_control: "中（30-40%）"
    pattern: |
      {対象者/対象物}が{条件1}、{条件2}、{条件3}という状況にある場合、
      {対応/判定}は正しいか。

    best_for:
      - "複数条件の組み合わせ"
      - "優先順位の判定"
      - "複数の制限条件"

    examples:
      - question: "営業許可を持つ遊技場が、営業所の名称を変更し、同時に営業時間を延長し、さらに新しい遊技機を設置する場合、この3つの変更は同時に手続きを行うことができる。"
        answer: "○"
        explanation: "営業許可内での名称変更、営業時間変更、遊技機追加は、それぞれ別の手続きですが同時に申請可能です。ただし承認は個別に行われます。"
      - question: "不正改造された遊技機を営業所に設置していた場合、その遊技機を撤去し、改造を是正すれば、営業停止処分は回避できる。"
        answer: "×"
        explanation: "不正改造の発見時点で既に違反状態が成立しており、撤去後も行政処分の対象となります。違反時点が重要です。"
      - question: "営業者が景品規制を守り、遊技機は型式検定合格品のみを使用し、営業時間も守っている場合、営業停止処分を受けることはない。"
        answer: "×"
        explanation: "複数の違反がなくても、他の違反（例：営業許可を得ずに営業など）があれば処分を受けます。すべての規定を守る必要があります。"

  # T5: 時間・期間判定型
  - id: T5
    name: "時間・期限・期間判定"
    description: "営業時間、届出期限、有効期間など時間的な要件を正確に理解しているか確認"
    format: "○×形式"
    difficulty_level: "基礎"
    distractor_control: "弱（10-20%）"
    pattern: |
      {対象行為}について、{時間要件}である。
      この内容は正しいか。

    best_for:
      - "営業時間の制限"
      - "届出期限"
      - "有効期間"
      - "猶予期間"

    examples:
      - question: "営業許可は無期限で有効であり、更新手続きの必要はない。"
        answer: "○"
        explanation: "風営法では営業許可が無期限で有効です。ただし届出義務は継続します。"
      - question: "型式検定の有効期間は5年間であり、その後は新たに申請する必要がある。"
        answer: "×"
        explanation: "型式検定の有効期間は3年間です。3年ごとに更新が必要です。"
      - question: "営業者は営業所の名称を変更した場合、変更から7日以内に公安委員会に届出をしなければならない。"
        answer: "×"
        explanation: "名称変更の届出期限は「変更から10日以内」です。7日ではなく10日です。"

# ====================================================================
# テンプレート 6-10: 応用判断系
# ====================================================================

  # T6: シナリオ応用型
  - id: T6
    name: "実務シナリオ・状況判定"
    description: "現実の営業場面を想定し、適切な対応を判断できるか確認"
    format: "○×形式"
    difficulty_level: "応用"
    distractor_control: "強（40-50%）"
    pattern: |
      【シナリオ】
      {詳細な状況説明}

      このとき、{判定内容}は適切か。

    best_for:
      - "現実的な営業場面"
      - "複合的な問題状況"
      - "実務的な判断"

    examples:
      - question: "【シナリオ】営業許可を受けた遊技場が、新型遊技機の導入を計画中です。その機種は型式検定に合格していますが、同じ開発メーカーから昨年発売されたものです。このとき、この新型機の設置には新たに許可申請が必要である。"
        answer: "×"
        explanation: "型式検定に合格している機種であれば、設置届出で対応でき、設置許可申請は不要です。ただし届出は必須です。"
      - question: "【シナリオ】営業場所の周辺で学校建設が予定されています。営業者は営業を続けたいため、営業所の名義を家族名義に変更しようと考えています。このような名義変更は法律上認められている。"
        answer: "×"
        explanation: "営業所名義の変更（営業者変更）は原則として新規許可が必要です。名前変更での回避は認められません。"
      - question: "【シナリオ】不景気のため、景品の内容を削減することにしました。従来は価値3000円の景品を提供していましたが、今後は価値1500円の景品に変更します。このような景品削減は事前届出なしに実施できる。"
        answer: "○"
        explanation: "景品規制は最高限度を定めたものであり、それ以下に削減することは自由です。ただし景品規制の最高限度を守る必要があります。"

  # T7: 比較対比型
  - id: T7
    name: "比較対比・区別判定"
    description: "似た2つの概念や状況の違いを正確に区別できるか確認"
    format: "○×形式"
    difficulty_level: "標準"
    distractor_control: "中（30-40%）"
    pattern: |
      {概念A}と{概念B}について、次の説明は正しいか。
      {比較内容}

    best_for:
      - "似た概念の区別"
      - "営業許可 vs 営業届出"
      - "型式検定 vs その他検査"

    examples:
      - question: "営業許可と営業届出は異なる手続きであり、営業許可は許可制（許可が必要）であるのに対し、営業届出は届出制（届出するだけで営業可能）である。"
        answer: "○"
        explanation: "営業許可は事前の許可が必須ですが、営業届出は届出で足ります。許可制と届出制は大きく異なります。"
      - question: "型式検定と設置届出は同じものであり、型式検定に合格すれば自動的に設置が許可される。"
        answer: "×"
        explanation: "型式検定は遊技機の仕様が法定基準に合致するかの検査です。設置届出は個別の営業所への設置を報告するもので、別の手続きです。"
      - question: "営業停止処分と営業禁止区域は異なり、営業停止は既存営業者への一時的な処分であるのに対し、営業禁止区域は特定地域での営業を根本的に禁止するものである。"
        answer: "○"
        explanation: "営業停止は既存許可者への行政処分（一時的）ですが、営業禁止区域は地域規制として新規許可を発行しません。"

  # T8: 否定型判定（最大のひっかけ）
  - id: T8
    name: "否定型・何が誤りか判定"
    description: "否定形を含む複雑な文を正確に読みこなし、誤りを特定できるか確認"
    format: "○×形式"
    difficulty_level: "応用"
    distractor_control: "強（40-50%）"
    pattern: |
      次の説明は正しいか、誤りか。

      {多重否定を含む複雑な文}

    best_for:
      - "複雑な否定文"
      - "二重否定を含む文"
      - "微妙な論理"

    examples:
      - question: "風営法は、遊技場営業を禁止していないわけではなく、適切な許可制の下で営業を認めている。"
        answer: "○"
        explanation: "「禁止していないわけではなく」は複雑な表現ですが、結果として「許可制で認めている」という意味で正確です。"
      - question: "型式検定に合格していない遊技機の設置は、不適切ではなく許可されている。"
        answer: "×"
        explanation: "型式検定合格は遊技機設置の基本要件です。未検定機は設置できません。「許可されている」は誤りです。"
      - question: "営業者は景品として金銭を支給することが禁止されていないわけではなく、厳格に規制されている。"
        answer: "○"
        explanation: "二重否定を解除すると「金銭支給は厳格に規制されている」となり、正確です。"

  # T9: 例外・特例判定型
  - id: T9
    name: "例外・特例・限定判定"
    description: "一般的な規則の例外や特例が存在する場合、それを正確に理解しているか確認"
    format: "○×形式"
    difficulty_level: "応用"
    distractor_control: "強（40-50%）"
    pattern: |
      原則として{原則}であるが、{条件}の場合は例外が認められているか。
      {具体的な例外説明}

    best_for:
      - "例外規定の理解"
      - "特例条件"
      - "限定的な許容"

    examples:
      - question: "原則として営業時間は午前10時から午前0時までであるが、地方公安委員会の特例承認があれば、深夜営業も認められる。"
        answer: "×"
        explanation: "風営法では基本的に営業時間の厳格な上限制限があり、深夜営業の一般的な特例は認められていません。"
      - question: "原則として遊技機は型式検定合格品のみの使用が必須であるが、都知事の実験的許可がある場合は未検定機の試験設置が可能である。"
        answer: "○"
        explanation: "型式検定制度には、研究開発のための試験設置という限定的な例外が存在します。"
      - question: "原則として景品は商品に限定されるが、公安委員会の承認があれば金銭景品の支給も可能である。"
        answer: "×"
        explanation: "金銭景品は厳格に禁止されており、公安委員会の承認があっても例外は認められません。"

  # T10: 段階的判定型
  - id: T10
    name: "段階的・プロセス判定"
    description: "複数段階のプロセスや手順を正確に理解し、各段階の目的や内容を把握しているか確認"
    format: "○×形式"
    difficulty_level: "標準"
    distractor_control: "中（30-40%）"
    pattern: |
      {対象プロセス}では、段階的に次のことが行われる：
      1. {ステップ1}
      2. {ステップ2}
      3. {ステップ3}

      この説明は正しいか。

    best_for:
      - "許可申請プロセス"
      - "行政処分の段階"
      - "改善指導から処分までの流れ"

    examples:
      - question: "遊技場営業許可の申請では、まず営業計画書を提出し、次に実地調査が行われ、最後に許可がおりる。"
        answer: "○"
        explanation: "申請→実地調査→許可という基本的な段階を正確に述べています。"
      - question: "違反営業に対しては、まず営業停止処分が科され、その後に改善指導が行われる。"
        answer: "×"
        explanation: "一般的には改善指導→警告→営業停止の段階が適切です。処分の後で指導は逆序です。"
      - question: "型式検定申請では、書類審査→性能試験→合否判定という段階が踏まれる。"
        answer: "○"
        explanation: "型式検定は書類審査と性能試験を経て合否が決定されます。この流れは正確です。"

# ====================================================================
# テンプレート 11-15: 複合・統合系
# ====================================================================

  # T11: 統合判定型（複数分野）
  - id: T11
    name: "統合判定・複数分野横断"
    description: "複数の法令分野に関わる状況を統合的に判断できるか確認"
    format: "○×形式"
    difficulty_level: "応用"
    distractor_control: "強（40-50%）"
    pattern: |
      以下の状況では、{複数分野の規定}の両方に抵触するか。
      {複合的なシナリオ}

    best_for:
      - "複数規定の組み合わせ"
      - "統合的な判断"
      - "複雑な現実状況"

    examples:
      - question: "営業者が営業許可の更新手続きを怠ったまま営業を継続し、同時に型式検定未合格の遊技機を設置している場合、両方の違反に該当する。"
        answer: "○"
        explanation: "許可要件の違反（更新懈怠）と遊技機要件の違反（未検定機設置）に同時に該当します。"
      - question: "遊技場が禁止区域に存在し、かつ営業時間を超過して営業している場合、禁止区域違反よりも営業時間超過違反の方が重い。"
        answer: "×"
        explanation: "禁止区域での営業は最も重大な違反です。複数違反の場合、最も重大なものが優先的に適用されます。"
      - question: "営業者が景品の金額上限を守りながら、型式検定未合格機を使用している場合、景品規制違反には該当しない。"
        answer: "○"
        explanation: "景品規制と遊技機検定は別の要件です。検定未合格は別途違反ですが、景品規制違反ではありません。"

  # T12: 優先順位判定型
  - id: T12
    name: "優先順位・重要度判定"
    description: "複数の違反や要件がある場合、どちらを優先すべきか、または重要度を正確に判断できるか確認"
    format: "○×形式"
    difficulty_level: "応用"
    distractor_control: "強（40-50%）"
    pattern: |
      {複数の違反/要件}がある場合、{優先順位判定}は正しいか。

    best_for:
      - "優先順位の判定"
      - "緊急性の判断"
      - "対応順序"

    examples:
      - question: "営業所で不正改造機が見つかった場合、まず遊技機を撤去することが、法的対応よりも優先される。"
        answer: "○"
        explanation: "違法状態の機器は即座に使用禁止・撤去が最優先です。その後で法的責任が追及されます。"
      - question: "営業許可の更新が期限切れになったら、営業を中止する前に公安委員会に相談することが先である。"
        answer: "×"
        explanation: "許可期限切れの営業は違法行為です。相談より先に許可がない状態での営業は即座に中止すべきです。"
      - question: "景品規制違反と営業時間超過違反が同時に発見された場合、景品規制違反を先に是正することが必須である。"
        answer: "×"
        explanation: "重要度が同等の場合、優先順位は状況による。一概に「景品が先」と言うことはできません。"

  # T13: 変化・変動判定型
  - id: T13
    name: "法改正・変更・更新判定"
    description: "法令の改正や制度変更、または状況の変化に伴う影響を正確に判断できるか確認"
    format: "○×形式"
    difficulty_level: "応用"
    distractor_control: "強（40-50%）"
    pattern: |
      {改正内容/状況変化}により、従来の{従来の扱い}は{新しい扱い}に変わった。
      この説明は正しいか。

    best_for:
      - "法改正への対応"
      - "制度変更"
      - "施行日の理解"

    examples:
      - question: "令和の法改正により、営業許可の有効期限が無期限から5年有効に変更された。"
        answer: "×"
        explanation: "営業許可は現在でも無期限です。このような期限導入の改正は実施されていません。"
      - question: "デジタル化対応として、営業許可の申請がオンラインで可能になった。"
        answer: "○"
        explanation: "多くの自治体では電子申請システムが導入されており、オンライン申請が可能になっています。"
      - question: "遊技機の認証制度が型式検定から ISO認証に変更された。"
        answer: "×"
        explanation: "遊技機の認証制度は現在でも型式検定が主流です。ISO認証への変更は行われていません。"

  # T14: 数値・金額判定型
  - id: T14
    name: "数値・金額・統計判定"
    description: "具体的な数値、金額、パーセンテージなどを正確に把握し、計算や比較判定ができるか確認"
    format: "○×形式"
    difficulty_level: "基礎"
    distractor_control: "弱（10-20%）"
    pattern: |
      {対象のルール}について、{数値に関する説明}は正しいか。

    best_for:
      - "金額上限"
      - "営業許可手数料"
      - "罰金額"
      - "設置機台数の制限"

    examples:
      - question: "遊技場営業の営業許可手数料は都道府県によって異なるが、一般的には10万円から30万円程度である。"
        answer: "○"
        explanation: "営業許可手数料は自治体によって設定が異なり、この範囲内で定められていることが多いです。"
      - question: "風営法違反の罰金は最高100万円である。"
        answer: "×"
        explanation: "風営法の違反罰金は違反内容によって異なり、不正改造などの重大違反では300万円以下の罰金が科される場合があります。"
      - question: "景品として支給できる金額の上限は、遊技店の営業形態によって異なり、小規模店舗では50万円、大規模店舗では100万円である。"
        answer: "×"
        explanation: "景品規制は営業規模ではなく、営業形態や地域で統一された上限が設定されます。規模による差は一般的ではありません。"

  # T15: 統計・傾向判定型
  - id: T15
    name: "統計・傾向・データ判定"
    description: "風営法に関する統計情報や全国的な傾向を正確に把握しているか確認"
    format: "○×形式"
    difficulty_level: "応用"
    distractor_control: "強（40-50%）"
    pattern: |
      {統計や傾向に関する説明}は正しいか。

      参考：{実際の統計値}

    best_for:
      - "違反事例の統計"
      - "業界傾向"
      - "都道府県別の差異"

    examples:
      - question: "全国の遊技場営業許可数は、この10年間で減少傾向にある。"
        answer: "○"
        explanation: "実際、遊技場数は減少傾向が続いており、多くの都道府県で許可数が減少しています。"
      - question: "営業停止処分の理由として、景品規制違反が不正改造よりも圧倒的に多い。"
        answer: "×"
        explanation: "一般的には不正改造が最重大違反として扱われており、不正改造による処分の方が厳しい傾向です。"
      - question: "都道府県別の違反摘発数には、地域による大きな差がある。"
        answer: "○"
        explanation: "遊技場の密集度や各都道府県の取締強度により、摘発数には地域差が存在します。"

# ====================================================================
# 補足：複合語への対応指示
# ====================================================================

compound_word_handling:
  instruction: "以下の複合語を含む問題を生成する際は、これらの複合語が[営業]と[許可]のように分割されないよう注意してください。"

  key_compound_words:
    - "営業許可"
    - "型式検定"
    - "営業禁止"
    - "営業停止"
    - "不正改造"
    - "営業所"
    - "営業時間"
    - "景品規制"
    - "不正行為"
    - "取消し要件"
    - "立入検査"
    - "行政処分"
    - "営業者"

distractor_control_guidelines:
  basic:
    description: "基礎レベル（10-20%ひっかけ）"
    characteristics:
      - "明らかに誤った選択肢を含む"
      - "正解との差が明確"
      - "法律知識がなくても常識で判断できる部分がある"

  standard:
    description: "標準レベル（30-40%ひっかけ）"
    characteristics:
      - "一部の要件は正しいが、全体では誤っている"
      - "微妙な法律解釈の違い"
      - "法律知識が必須"

  advanced:
    description: "応用レベル（40-50%ひっかけ）"
    characteristics:
      - "複数の条件の組み合わせ"
      - "例外規定の理解"
      - "複雑な否定論理"
      - "優先順位の判断"

few_shot_example_format:
  note: "Claude APIへの問題生成プロンプトには、各テンプレートから最低3つの例を含めてください。"
  prompt_structure: |
    以下のテンプレートに従って、{テンプレート名}の問題を5問生成してください。

    【テンプレート情報】
    - 難易度: {difficulty_level}
    - ひっかけ強度: {distractor_control}
    - パターン: {pattern}

    【参考例】
    {examples[0]}
    {examples[1]}
    {examples[2]}

    上記の例のレベルと形式に合わせて、新しい問題を生成してください。
    複合語に注意し、以下の複合語は分割しないでください：
    {compound_word_list}
