# 【GPT-5へのレビュー依頼】

主任者講習アプリ - RAG生成パイプラインの改善

## 🔴 現状分析

自動生成された1200問に**100% の文法エラー**が検出されました。

## エラーパターン分析

```
すべての問題:        1,200
文法エラー:         1,200 (100%)
  - 単語重複:       1,200 (「営業許可営業許可」)
  - 文法エラー:     1,200 (「のについて」「のは～」)
  - プレースホルダー: 一部（「～」）
```

## 推定原因

RAG/LLM生成パイプラインのテンプレート処理に問題：

```javascript
// 推定:
テンプレート: "{subject}{subject}の...ついて..."
生成時の置換が失敗 → "営業許可営業許可のについて..."
```

## 💡 依頼項目

### 1. RAGパイプラインの診断
- 現在の `/backend/rag-bulk-problem-generator.js` を確認
- テンプレート変数の置換ロジックを点検
- 原因特定と改善案を提示

### 2. LLM生成プロンプトの改善
- 文法エラー排除の仕組みをプロンプトに組み込む
- プレースホルダー（`～`）が残らないようにする
- 質問の明確性を向上させるプロンプト設計

### 3. 自動修正ツール
- **質問1**: 既存の1200問を自動修正できるか？
- **質問2**: 修正スクリプトの実装方針は？
- **質問3**: 修正検証のロジックは？

### 4. 品質チェック統合
- LLM生成時に自動チェック機能を組み込む方法
- エラー検出 → 自動リジェネレーション のループ

## 📁 対象ファイル

| ファイル | 説明 |
|--------|------|
| `/backend/rag-bulk-problem-generator.js` | 大規模生成エンジン |
| `/backend/rag-pipeline.js` | RAGパイプライン |
| `/backend/advanced-problem-generator.js` | LLM生成ロジック |
| `/public/mock_problems.json` | 対象ファイル（1200問） |
| `/backend/problem-quality-checker.js` | チェッカー（Worker3作成） |

## 📊 詳細レポート

`/tmp/quality_check_report.json` を参照

## ⏰ 対応依頼

- 診断: 至急
- 改善提案: 提案ベースで時間をかけて良好

---

**From**: Worker3 (Claude Code)
**Type**: A2A相談（相談可・指示待ち）
**Date**: 2025-10-21
